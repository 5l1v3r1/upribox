{% extends request.is_ajax|yesno:"base_ajax.html,base.html" %}

{% load i18n %}
{% load base_extras %}

{% block title %}{% trans "Ninja Modus - upribox" %}{% endblock %}

{% block header %}
    <h1>{% trans "Ninja Modus" %}</h1>
    <p>{% trans "Anonym und werbefrei surfen." %}</p>
{% endblock %}

{% block content %}
    {% comment %} Insert URLs for the Tor Browser Bundle into the "blocktrans" tag{% endcomment %}
    <p><strong>{%  blocktrans with windows="https://www.torproject.org/download/download-easy.html#windows" macos="https://www.torproject.org/download/download-easy.html#mac" linux="https://www.torproject.org/download/download-easy.html#linux"%}
        Wir empfehlen die Nutzung des Tor-Browser-Bundle (Download f&uuml;r <a href="{{ windows }}">Windows</a>, <a href="{{ macos }}">Mac OS</a> oder <a href="{{ linux }}">Linux</a>). Sollten Sie keine M&ouml;glichkeit haben, den Tor-Browser zu nutzen, k&ouml;nnen Sie als Alternative den Ninja Modus einschalten. Dieser gew&auml;hrleistet aber nicht das volle Surferlebnis (etwa durch langsame Geschwindigkeit und Webseiten in fremder Sprache).
    {% endblocktrans %}</strong></p>

             <script>
                    function getCookie(name) {
                      var value = "; " + document.cookie;
                      var parts = value.split("; " + name + "=");
                      if (parts.length == 2) return parts.pop().split(";").shift();
                    }
                    var http = new XMLHttpRequest();
                    var url = "{% url 'upri_check_pi3' %}"
                    http.open("POST", url, true);

                    //Send the proper header information along with the request
                    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    http.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
                    http.setRequestHeader("Connection", "close");

                    http.onreadystatechange = function() {//Call a function when the state changes.
                        if(http.readyState == 4 && http.status == 200) {
                            result = JSON.parse(http.responseText);
                            if (result['pi3'].localeCompare("yes") == 0) {
                                document.getElementById("ninja_toggle").innerHTML = '<h2 class="warning-message">{% trans "Das Ninja WiFi kann auf dem Raspberry Pi 3 nicht aktiviert werden." %}</h2>';
                            }
                    }
                    }
                    http.send('');

                </script>

    <div class="row clearfix" id="ninja_toggle">
        <div class="col-2 col-2-main js-col-2-main">

            <form>
                <fieldset>

                    <legend>{% trans "Ein-/Ausschalten" %}</legend>

                    {% get_fact 'tor' 'general' 'enabled' as torenabled%}

                    {% if torenabled == 'yes'%}
                        <div class="switch icon i-on">
                            <p>{% trans "Ninja Modus läuft" %}</p>
                            <button class="js-toggle-button" data-state-enabled="no" href="{% url 'upri_ninja_toggle' %}">{% trans "Ausschalten" %}</button>
                        </div>
                    {% else %}
                        <div class="switch icon i-off">
                            <p>{% trans "Ninja Modus läuft nicht" %}</p>
                            <button class="js-toggle-button" data-state-enabled="yes" href="{% url 'upri_ninja_toggle' %}">{% trans "Einschalten" %}</button>
                        </div>
                    {% endif %}


                </fieldset>
            </form>

            {% url 'upri_ninja' as href %}
            {% trans "WLAN Zugangsdaten" as form_title%}
            {% include 'form.html' %}

        </div>

        <div class="col-2 col-2-info js-col-2-info">
            <aside>
                <h2 class="icon i-information js-info-trigger">
                    <a href="#" title="{% trans "Information einklappen" %}" class="i-arrow">{% trans "Was ist der Ninja Modus?" %}</a>
                </h2>
                <p>{% trans "Im Ninja-Modus befinden Sie sich in einem anonymen Netzwerk (Tor), womit eine Nachverfolgung Ihrer Aktivit&auml;ten im Internet erschwert wird. So kann ihr Internetanbieter zum Beispiel nicht mehr nachverfolgen, welche Webseiten Sie besuchen. Da Ihre Anfrage f&uuml;r Webseiten &uuml;ber mehrere Router geleitet werden, kommt es zu einer sp&uuml;rbaren Reduktion der Internet-Geschwindigkeit." %}</p><p>

                {% trans "Im Ninja-Modus sind alle Eigenschaften des Silent Modus integriert." %}</p>
                {% url 'upri_faq' as faq_url %}
                <p>{%  blocktrans %}H&auml;ufig gestellte Fragen zur upribox finden Sie unter <a href="{{ faq_url }}" title="FAQ">Hilfe</a>.{%  endblocktrans %}</p>
                <a href="#" title="{% trans "Information ausblenden" %}" class="info-out i-arrow js-info-trigger">{% trans "Information ausblenden" %}</a>
            </aside>
        </div>
    </div>
{% endblock %}
